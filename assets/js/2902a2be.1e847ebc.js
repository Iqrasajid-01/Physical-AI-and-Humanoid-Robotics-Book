"use strict";(globalThis.webpackChunkai_robotics_book=globalThis.webpackChunkai_robotics_book||[]).push([[7780],{1564:(e,n,a)=>{a.d(n,{A:()=>s});const s=a.p+"assets/images/ch4-ad-d856c9f3a8244fc968b5c579bf5a849a.svg"},3211:(e,n,a)=>{a.d(n,{A:()=>s});const s=a.p+"assets/images/ch4-flow-47703fd2763f2b24908e910466370e6b.svg"},7891:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"module1_ros2/ros2-packages-and-launch-files","title":"ROS2 Packages and Launch Files","description":"Learning Objectives","source":"@site/docs/module1_ros2/04-ros2-packages-and-launch-files.md","sourceDirName":"module1_ros2","slug":"/module1_ros2/ros2-packages-and-launch-files","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/ros2-packages-and-launch-files","draft":false,"unlisted":false,"editUrl":"https://github.com/Iqrasajid-01/docs/module1_ros2/04-ros2-packages-and-launch-files.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"ROS2 Packages and Launch Files","sidebar_label":"04 - ROS2 Packages and Launch Files"},"sidebar":"tutorialSidebar","previous":{"title":"03 - ROS2 Services and Actions","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/services-and-actions"},"next":{"title":"05 - ROS2 Parameters and Configuration","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/ros2-parameters-and-configuration"}}');var i=a(4848),r=a(8453);const l={title:"ROS2 Packages and Launch Files",sidebar_label:"04 - ROS2 Packages and Launch Files"},c="ROS2 Packages and Launch Files",t={},o=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"ROS2 Packages",id:"ros2-packages",level:3},{value:"Package Build Systems",id:"package-build-systems",level:3},{value:"Launch Files",id:"launch-files",level:3},{value:"Package Directory Structure",id:"package-directory-structure",level:3},{value:"Architecture Diagram",id:"architecture-diagram",level:2},{value:"Flow Diagram",id:"flow-diagram",level:2},{value:"Code Example: Python Package Structure",id:"code-example-python-package-structure",level:2},{value:"Code Example: Launch File",id:"code-example-launch-file",level:2},{value:"Configuration File Example",id:"configuration-file-example",level:2},{value:"Step-by-Step Practical Tutorial",id:"step-by-step-practical-tutorial",level:2},{value:"Creating a Complete ROS2 Package with Launch Files",id:"creating-a-complete-ros2-package-with-launch-files",level:3},{value:"Summary",id:"summary",level:2},{value:"Mini-Quiz",id:"mini-quiz",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ros2-packages-and-launch-files",children:"ROS2 Packages and Launch Files"})}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create and structure ROS2 packages using different build systems"}),"\n",(0,i.jsx)(n.li,{children:"Understand the organization and purpose of package directories"}),"\n",(0,i.jsx)(n.li,{children:"Create and configure launch files for starting multiple nodes"}),"\n",(0,i.jsx)(n.li,{children:"Use parameters and configuration files in ROS2 packages"}),"\n",(0,i.jsx)(n.li,{children:"Debug common issues with package dependencies and launch files"}),"\n",(0,i.jsx)(n.li,{children:"Implement best practices for package organization and launch file design"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"ROS2 packages are the fundamental building blocks of ROS2 applications. They organize related functionality into manageable units and provide a standardized way to share code. Launch files complement packages by enabling the coordinated startup of multiple nodes with specific configurations."}),"\n",(0,i.jsx)(n.p,{children:"Understanding packages and launch files is crucial for developing complex robotic systems where multiple nodes need to work together. This chapter will guide you through creating well-structured packages and launch files that follow ROS2 best practices."}),"\n",(0,i.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,i.jsx)(n.h3,{id:"ros2-packages",children:"ROS2 Packages"}),"\n",(0,i.jsx)(n.p,{children:"A ROS2 package is a container that organizes related functionality:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Contains source code, launch files, configuration files, and documentation"}),"\n",(0,i.jsx)(n.li,{children:"Has a unique name within the workspace"}),"\n",(0,i.jsxs)(n.li,{children:["Includes a ",(0,i.jsx)(n.code,{children:"package.xml"})," file with metadata and dependencies"]}),"\n",(0,i.jsx)(n.li,{children:"Follows specific directory conventions"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"package-build-systems",children:"Package Build Systems"}),"\n",(0,i.jsx)(n.p,{children:"ROS2 supports multiple build systems:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ament_cmake"}),": For C++ packages using CMake"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ament_python"}),": For Python packages using setuptools"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ament_package"}),": For packages without source code (pure resource packages)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"launch-files",children:"Launch Files"}),"\n",(0,i.jsx)(n.p,{children:"Launch files provide a way to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Start multiple nodes simultaneously"}),"\n",(0,i.jsx)(n.li,{children:"Configure parameters for nodes"}),"\n",(0,i.jsx)(n.li,{children:"Set up remappings"}),"\n",(0,i.jsx)(n.li,{children:"Define conditional execution"}),"\n",(0,i.jsx)(n.li,{children:"Organize complex robot applications"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"package-directory-structure",children:"Package Directory Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my_robot_package/\n\u251c\u2500\u2500 CMakeLists.txt          # Build configuration (for CMake packages)\n\u251c\u2500\u2500 package.xml             # Package metadata and dependencies\n\u251c\u2500\u2500 setup.py                # Python setup configuration (for Python packages)\n\u251c\u2500\u2500 setup.cfg               # Python installation configuration\n\u251c\u2500\u2500 my_robot_package/       # Python module directory\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 my_module.py\n\u251c\u2500\u2500 launch/                 # Launch files\n\u2502   \u2514\u2500\u2500 my_robot_launch.py\n\u251c\u2500\u2500 config/                 # Configuration files\n\u2502   \u2514\u2500\u2500 my_robot_params.yaml\n\u251c\u2500\u2500 src/                    # Source files (C++ packages)\n\u251c\u2500\u2500 include/                # Header files (C++ packages)\n\u2514\u2500\u2500 test/                   # Test files\n"})}),"\n",(0,i.jsx)(n.h2,{id:"architecture-diagram",children:"Architecture Diagram"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Architecture Diagram",src:a(1564).A+"",width:"1519",height:"217"})}),"\n",(0,i.jsx)(n.h2,{id:"flow-diagram",children:"Flow Diagram"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Architecture Diagram",src:a(3211).A+"",width:"1119",height:"411"})}),"\n",(0,i.jsx)(n.h2,{id:"code-example-python-package-structure",children:"Code Example: Python Package Structure"}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of a Python ROS2 package structure:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"package.xml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>my_robot_bringup</name>\n  <version>0.0.0</version>\n  <description>Package to bring up my robot</description>\n  <maintainer email="user@example.com">User</maintainer>\n  <license>Apache-2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>sensor_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"setup.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'my_robot_bringup'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Include all launch files\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n        # Include all config files\n        (os.path.join('share', package_name, 'config'), glob('config/*.yaml')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='User',\n    maintainer_email='user@example.com',\n    description='Package to bring up my robot',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'robot_controller = my_robot_bringup.robot_controller:main',\n        ],\n    },\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"code-example-launch-file",children:"Code Example: Launch File"}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of a launch file that starts multiple nodes:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"launch/my_robot_launch.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\n\ndef generate_launch_description():\n    # Declare launch arguments\n    use_sim_time = LaunchConfiguration('use_sim_time', default='false')\n\n    # Get package share directory\n    pkg_share = get_package_share_directory('my_robot_bringup')\n\n    # Load parameters from YAML file\n    params_file = os.path.join(pkg_share, 'config', 'my_robot_params.yaml')\n\n    return LaunchDescription([\n        # Declare launch arguments\n        DeclareLaunchArgument(\n            'use_sim_time',\n            default_value='false',\n            description='Use simulation (Gazebo) clock if true'),\n\n        # Robot controller node\n        Node(\n            package='my_robot_bringup',\n            executable='robot_controller',\n            name='robot_controller',\n            parameters=[params_file, {'use_sim_time': use_sim_time}],\n            output='screen'),\n\n        # Sensor processing node\n        Node(\n            package='my_robot_bringup',\n            executable='sensor_processor',\n            name='sensor_processor',\n            parameters=[params_file, {'use_sim_time': use_sim_time}],\n            output='screen'),\n\n        # Navigation node\n        Node(\n            package='my_robot_bringup',\n            executable='navigator',\n            name='navigator',\n            parameters=[params_file, {'use_sim_time': use_sim_time}],\n            output='screen'),\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-file-example",children:"Configuration File Example"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"config/my_robot_params.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'/**:\n  ros__parameters:\n    use_sim_time: false\n    robot_name: "my_robot"\n    update_rate: 50.0\n    linear_velocity_limit: 1.0\n    angular_velocity_limit: 1.0\n\nrobot_controller:\n  ros__parameters:\n    max_acceleration: 2.0\n    control_frequency: 50.0\n\nsensor_processor:\n  ros__parameters:\n    sensor_timeout: 0.1\n    data_buffer_size: 100\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-by-step-practical-tutorial",children:"Step-by-Step Practical Tutorial"}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-complete-ros2-package-with-launch-files",children:"Creating a Complete ROS2 Package with Launch Files"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create a new ROS2 package"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_bringup --dependencies rclpy std_msgs sensor_msgs\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Navigate to the package directory"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd my_robot_bringup\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create the main module directory"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir my_robot_bringup\ntouch my_robot_bringup/__init__.py\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create a simple robot controller node"})," (",(0,i.jsx)(n.code,{children:"my_robot_bringup/robot_controller.py"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass RobotController(Node):\n\n    def __init__(self):\n        super().__init__('robot_controller')\n        self.publisher_ = self.create_publisher(String, 'robot_status', 10)\n        timer_period = 1.0  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Robot status: operational - {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    robot_controller = RobotController()\n    rclpy.spin(robot_controller)\n    robot_controller.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create launch and config directories"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir launch config\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create the launch file"})," (",(0,i.jsx)(n.code,{children:"launch/my_robot_launch.py"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Use the launch file example above\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create the config file"})," (",(0,i.jsx)(n.code,{children:"config/my_robot_params.yaml"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Use the config file example above\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Update the setup.py file"})," to include data files and entry points:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Use the setup.py example above with the correct data_files section\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Build the package"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_bringup\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Source the workspace"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run the launch file"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_bringup my_robot_launch.py\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"This chapter covered ROS2 packages and launch files, which are essential for organizing and deploying robotic applications. Packages provide a standardized way to organize code, while launch files enable the coordinated startup of complex systems with multiple nodes."}),"\n",(0,i.jsx)(n.p,{children:"Well-structured packages with proper dependencies and launch files make robotic applications modular, reusable, and easier to maintain. Understanding these concepts is fundamental to building scalable robotic systems."}),"\n",(0,i.jsx)(n.h2,{id:"mini-quiz",children:"Mini-Quiz"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"What is the primary purpose of a ROS2 package?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A) To store configuration files only"}),"\n",(0,i.jsx)(n.li,{children:"B) To organize related functionality into manageable units"}),"\n",(0,i.jsx)(n.li,{children:"C) To compile C++ code only"}),"\n",(0,i.jsx)(n.li,{children:"D) To provide visualization tools"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Which build type should be used for a Python-based ROS2 package?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A) ament_cmake"}),"\n",(0,i.jsx)(n.li,{children:"B) ament_python"}),"\n",(0,i.jsx)(n.li,{children:"C) ament_package"}),"\n",(0,i.jsx)(n.li,{children:"D) colcon_build"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"What is the main advantage of using launch files?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A) They make code run faster"}),"\n",(0,i.jsx)(n.li,{children:"B) They allow starting multiple nodes with one command"}),"\n",(0,i.jsx)(n.li,{children:"C) They reduce memory usage"}),"\n",(0,i.jsx)(n.li,{children:"D) They provide better security"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Which file contains package metadata and dependencies?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A) CMakeLists.txt"}),"\n",(0,i.jsx)(n.li,{children:"B) setup.py"}),"\n",(0,i.jsx)(n.li,{children:"C) package.xml"}),"\n",(0,i.jsx)(n.li,{children:"D) requirements.txt"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["What does the ",(0,i.jsx)(n.code,{children:"/**:"})," syntax mean in a YAML parameter file?"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A) It applies to all nodes"}),"\n",(0,i.jsx)(n.li,{children:"B) It's a comment"}),"\n",(0,i.jsx)(n.li,{children:"C) It defines a new namespace"}),"\n",(0,i.jsx)(n.li,{children:"D) It's an error in syntax"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Answers"}),": 1-B, 2-B, 3-B, 4-C, 5-A"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>c});var s=a(6540);const i={},r=s.createContext(i);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);