"use strict";(globalThis.webpackChunkai_robotics_book=globalThis.webpackChunkai_robotics_book||[]).push([[3115],{1629:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module1_ros2/ros2-nodes-and-topics","title":"ROS2 Nodes and Topics","description":"Learning Objectives","source":"@site/docs/module1_ros2/02-ros2-nodes-and-topics.md","sourceDirName":"module1_ros2","slug":"/module1_ros2/ros2-nodes-and-topics","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/ros2-nodes-and-topics","draft":false,"unlisted":false,"editUrl":"https://github.com/Iqrasajid-01/docs/module1_ros2/02-ros2-nodes-and-topics.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"ROS2 Nodes and Topics","sidebar_label":"02 - ROS2 Nodes and Topics"},"sidebar":"tutorialSidebar","previous":{"title":"01 - Introduction to ROS2","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/introduction-to-ros2"},"next":{"title":"03 - ROS2 Services and Actions","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/services-and-actions"}}');var r=n(4848),t=n(8453);const o={title:"ROS2 Nodes and Topics",sidebar_label:"02 - ROS2 Nodes and Topics"},l="ROS2 Nodes and Topics",c={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"ROS2 Nodes",id:"ros2-nodes",level:3},{value:"Topics and Publish-Subscribe Pattern",id:"topics-and-publish-subscribe-pattern",level:3},{value:"Message Types",id:"message-types",level:3},{value:"Architecture Diagram",id:"architecture-diagram",level:2},{value:"Flow Diagram",id:"flow-diagram",level:2},{value:"Code Example: Node with Publisher and Subscriber",id:"code-example-node-with-publisher-and-subscriber",level:2},{value:"Custom Message Example",id:"custom-message-example",level:2},{value:"Step-by-Step Practical Tutorial",id:"step-by-step-practical-tutorial",level:2},{value:"Creating a Node with Custom Publisher and Subscriber",id:"creating-a-node-with-custom-publisher-and-subscriber",level:3},{value:"Summary",id:"summary",level:2},{value:"Mini-Quiz",id:"mini-quiz",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"ros2-nodes-and-topics",children:"ROS2 Nodes and Topics"})}),"\n",(0,r.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(s.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Define ROS2 nodes and explain their role in the system architecture"}),"\n",(0,r.jsx)(s.li,{children:"Understand the publish-subscribe communication pattern using topics"}),"\n",(0,r.jsx)(s.li,{children:"Create and implement custom message types"}),"\n",(0,r.jsx)(s.li,{children:"Design efficient topic-based communication systems"}),"\n",(0,r.jsx)(s.li,{children:"Debug common issues with node and topic communication"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(s.p,{children:"Nodes and topics form the backbone of ROS2's communication architecture. A node is a process that performs computation, while topics provide a mechanism for nodes to exchange messages through a publish-subscribe pattern. This chapter will explore how nodes and topics work together to enable distributed robotic systems."}),"\n",(0,r.jsx)(s.p,{children:"Understanding nodes and topics is fundamental to building robust robotic applications. They allow different components of a robot to communicate efficiently, whether it's sensor data flowing from perception modules to planning systems, or control commands moving from decision-making algorithms to actuator interfaces."}),"\n",(0,r.jsx)(s.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(s.h3,{id:"ros2-nodes",children:"ROS2 Nodes"}),"\n",(0,r.jsx)(s.p,{children:"A node is an executable that uses ROS2 client library to communicate with other nodes. Nodes can:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Publish messages to topics"}),"\n",(0,r.jsx)(s.li,{children:"Subscribe to topics to receive messages"}),"\n",(0,r.jsx)(s.li,{children:"Provide services"}),"\n",(0,r.jsx)(s.li,{children:"Call services"}),"\n",(0,r.jsx)(s.li,{children:"Send and receive actions"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Nodes should be designed to perform a single function well, following the Unix philosophy of small, focused processes that work together."}),"\n",(0,r.jsx)(s.h3,{id:"topics-and-publish-subscribe-pattern",children:"Topics and Publish-Subscribe Pattern"}),"\n",(0,r.jsx)(s.p,{children:"Topics enable asynchronous communication between nodes using a publish-subscribe pattern:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Publishers send messages to a topic"}),"\n",(0,r.jsx)(s.li,{children:"Subscribers receive messages from a topic"}),"\n",(0,r.jsx)(s.li,{children:"The ROS2 middleware (DDS) handles message routing"}),"\n",(0,r.jsx)(s.li,{children:"Multiple publishers and subscribers can exist for the same topic"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"message-types",children:"Message Types"}),"\n",(0,r.jsxs)(s.p,{children:["Messages are the data structures that flow between nodes. They are defined using ",(0,r.jsx)(s.code,{children:".msg"})," files and can contain:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Primitive types (int8, int16, int32, int64, uint8, uint16, uint32, uint64, float32, float64, string, bool)"}),"\n",(0,r.jsx)(s.li,{children:"Arrays of primitive types"}),"\n",(0,r.jsx)(s.li,{children:"Other message types (nested messages)"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"architecture-diagram",children:"Architecture Diagram"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"Flow Diagram",src:n(8598).A+"",width:"310",height:"714"})}),"\n",(0,r.jsx)(s.h2,{id:"flow-diagram",children:"Flow Diagram"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"Flow Diagram",src:n(7074).A+"",width:"789",height:"267"})}),"\n",(0,r.jsx)(s.h2,{id:"code-example-node-with-publisher-and-subscriber",children:"Code Example: Node with Publisher and Subscriber"}),"\n",(0,r.jsx)(s.p,{children:"Here's an example of a ROS2 node that both publishes and subscribes to topics:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass TalkerListenerNode(Node):\n\n    def __init__(self):\n        super().__init__('talker_listener_node')\n\n        # Create publisher\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\n\n        # Create subscriber\n        self.subscription = self.create_subscription(\n            String,\n            'input',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n        # Timer for publishing\n        timer_period = 1.0  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n        self.i = 0\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n        # Echo the message back\n        response_msg = String()\n        response_msg.data = f'Echo: {msg.data}'\n        self.publisher_.publish(response_msg)\n        self.get_logger().info('Publishing: \"%s\"' % response_msg.data)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = TalkerListenerNode()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"custom-message-example",children:"Custom Message Example"}),"\n",(0,r.jsxs)(s.p,{children:["To create a custom message type, create a ",(0,r.jsx)(s.code,{children:".msg"})," file in your package's ",(0,r.jsx)(s.code,{children:"msg"})," directory:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"# CustomMessage.msg\nstring name\nint32 id\nfloat64[] values\ngeometry_msgs/Point position\n"})}),"\n",(0,r.jsx)(s.p,{children:"Then use it in your code:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'from my_package_msgs.msg import CustomMessage\n\n# In your node:\ndef create_custom_message(self):\n    msg = CustomMessage()\n    msg.name = "Robot1"\n    msg.id = 1\n    msg.values = [1.0, 2.0, 3.0]\n    msg.position.x = 1.0\n    msg.position.y = 2.0\n    msg.position.z = 0.0\n    return msg\n'})}),"\n",(0,r.jsx)(s.h2,{id:"step-by-step-practical-tutorial",children:"Step-by-Step Practical Tutorial"}),"\n",(0,r.jsx)(s.h3,{id:"creating-a-node-with-custom-publisher-and-subscriber",children:"Creating a Node with Custom Publisher and Subscriber"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Create a new ROS2 package"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_nodes\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Navigate to the package directory"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd my_robot_nodes\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Create the Python script"})," (",(0,r.jsx)(s.code,{children:"my_robot_nodes/my_robot_nodes/talker_listener.py"}),"):"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Use the code example above\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Make the script executable"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"chmod +x my_robot_nodes/talker_listener.py\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Update the setup.py file"})," to include the entry point:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'talker_listener = my_robot_nodes.talker_listener:main',\n    ],\n},\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Build the package"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_nodes\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Source the workspace"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Run the node"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 run my_robot_nodes talker_listener\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"In a new terminal, publish messages to test"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic pub /input std_msgs/String \"data: 'Hello from command line'\"\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(s.p,{children:"This chapter covered the fundamental concepts of ROS2 nodes and topics, which form the backbone of ROS2's communication system. We explored the publish-subscribe pattern, learned how to create nodes that both publish and subscribe to topics, and examined custom message types."}),"\n",(0,r.jsx)(s.p,{children:"Nodes and topics enable the distributed architecture that makes ROS2 powerful for robotics applications. By following the publish-subscribe pattern, we can create modular systems where different components can communicate without tight coupling."}),"\n",(0,r.jsx)(s.h2,{id:"mini-quiz",children:"Mini-Quiz"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"What is the primary communication pattern used by ROS2 topics?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Request-Response"}),"\n",(0,r.jsx)(s.li,{children:"B) Publish-Subscribe"}),"\n",(0,r.jsx)(s.li,{children:"C) Peer-to-Peer"}),"\n",(0,r.jsx)(s.li,{children:"D) Client-Server"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Which of the following can a ROS2 node do?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Publish messages to topics"}),"\n",(0,r.jsx)(s.li,{children:"B) Subscribe to topics"}),"\n",(0,r.jsx)(s.li,{children:"C) Provide and call services"}),"\n",(0,r.jsx)(s.li,{children:"D) All of the above"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"What happens when multiple nodes publish to the same topic?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) Only the first publisher's messages are received"}),"\n",(0,r.jsx)(s.li,{children:"B) Messages from all publishers are received by subscribers"}),"\n",(0,r.jsx)(s.li,{children:"C) The system crashes"}),"\n",(0,r.jsx)(s.li,{children:"D) Messages are merged together"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"What is the purpose of Quality of Service (QoS) profiles for topics?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) To define security settings only"}),"\n",(0,r.jsx)(s.li,{children:"B) To tune communication behavior like reliability and durability"}),"\n",(0,r.jsx)(s.li,{children:"C) To limit the number of publishers"}),"\n",(0,r.jsx)(s.li,{children:"D) To encrypt message content"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Which command can be used to list all available topics?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A) ros2 show topics"}),"\n",(0,r.jsx)(s.li,{children:"B) ros2 list topics"}),"\n",(0,r.jsx)(s.li,{children:"C) ros2 topic list"}),"\n",(0,r.jsx)(s.li,{children:"D) ros2 show all"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Answers"}),": 1-B, 2-D, 3-B, 4-B, 5-C"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},7074:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/ch2-flow-313a978b2fb5059b53b775363f4a5c0e.svg"},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const r={},t=i.createContext(r);function o(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:s},e.children)}},8598:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/architecture-diagram-e492be1cba81ae8035c02021f8b68d85.png"}}]);