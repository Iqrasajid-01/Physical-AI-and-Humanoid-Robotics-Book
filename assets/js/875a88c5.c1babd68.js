"use strict";(globalThis.webpackChunkai_robotics_book=globalThis.webpackChunkai_robotics_book||[]).push([[5806],{4528:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"module1_ros2/ros2-best-practices","title":"ROS2 Best Practices","description":"Learning Objectives","source":"@site/docs/module1_ros2/06-ros2-best-practices.md","sourceDirName":"module1_ros2","slug":"/module1_ros2/ros2-best-practices","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/ros2-best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/Iqrasajid-01/docs/module1_ros2/06-ros2-best-practices.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"ROS2 Best Practices","sidebar_label":"06 - ROS2 Best Practices"},"sidebar":"tutorialSidebar","previous":{"title":"05 - ROS2 Parameters and Configuration","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module1_ros2/ros2-parameters-and-configuration"},"next":{"title":"07 - Introduction to Gazebo Simulation","permalink":"/Physical-AI-and-Humanoid-Robotics-Book/docs/module2_simulation/introduction-to-gazebo-simulation"}}');var t=s(4848),r=s(8453);const a={title:"ROS2 Best Practices",sidebar_label:"06 - ROS2 Best Practices"},l="ROS2 Best Practices",c={},o=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Node Design Principles",id:"node-design-principles",level:3},{value:"Communication Best Practices",id:"communication-best-practices",level:3},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Code Quality Standards",id:"code-quality-standards",level:3},{value:"Architecture Diagram",id:"architecture-diagram",level:2},{value:"Flow Diagram",id:"flow-diagram",level:2},{value:"Code Example: Well-Structured ROS2 Node",id:"code-example-well-structured-ros2-node",level:2},{value:"Launch File Best Practices",id:"launch-file-best-practices",level:2},{value:"Testing Best Practices",id:"testing-best-practices",level:2},{value:"Step-by-Step Practical Tutorial",id:"step-by-step-practical-tutorial",level:2},{value:"Implementing Best Practices in a Complete Example",id:"implementing-best-practices-in-a-complete-example",level:3},{value:"Summary",id:"summary",level:2},{value:"Mini-Quiz",id:"mini-quiz",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ros2-best-practices",children:"ROS2 Best Practices"})}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apply software engineering best practices to ROS2 development"}),"\n",(0,t.jsx)(n.li,{children:"Design efficient and maintainable ROS2 node architectures"}),"\n",(0,t.jsx)(n.li,{children:"Implement proper error handling and logging strategies"}),"\n",(0,t.jsx)(n.li,{children:"Follow ROS2 community standards and conventions"}),"\n",(0,t.jsx)(n.li,{children:"Optimize ROS2 applications for performance and reliability"}),"\n",(0,t.jsx)(n.li,{children:"Debug and profile ROS2 applications effectively"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"ROS2 best practices encompass the accumulated knowledge and experience of the robotics community in developing robust, maintainable, and efficient robotic systems. These practices span from code organization and architecture to performance optimization and debugging techniques."}),"\n",(0,t.jsx)(n.p,{children:"Following best practices is essential for creating production-ready robotic applications that can be maintained, extended, and deployed reliably. This chapter consolidates the most important practices for ROS2 development based on real-world experience."}),"\n",(0,t.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,t.jsx)(n.h3,{id:"node-design-principles",children:"Node Design Principles"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Single Responsibility"}),": Each node should have one clear purpose"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Modularity"}),": Design nodes to be reusable and replaceable"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cohesion"}),": Group related functionality within a node"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Coupling"}),": Minimize dependencies between nodes"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"communication-best-practices",children:"Communication Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Topic Design"}),": Use descriptive names and appropriate message types"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"QoS Configuration"}),": Select appropriate Quality of Service policies for your use case"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Message Efficiency"}),": Design compact and efficient message structures"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rate Limiting"}),": Avoid excessive message publishing rates"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Threading"}),": Use appropriate threading models for your application"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Memory Management"}),": Minimize memory allocations in critical loops"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CPU Utilization"}),": Balance performance with system resource usage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Real-time Constraints"}),": Understand and implement real-time considerations when needed"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"code-quality-standards",children:"Code Quality Standards"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Documentation"}),": Document all public interfaces and complex algorithms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing"}),": Implement unit tests, integration tests, and system tests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Code Review"}),": Establish code review processes for quality assurance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Version Control"}),": Use Git effectively with clear commit messages"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"architecture-diagram",children:"Architecture Diagram"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Architecture Diagram",src:s(8793).A+"",width:"718",height:"809"})}),"\n",(0,t.jsx)(n.h2,{id:"flow-diagram",children:"Flow Diagram"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Architecture Diagram",src:s(9729).A+"",width:"1168",height:"423"})}),"\n",(0,t.jsx)(n.h2,{id:"code-example-well-structured-ros2-node",children:"Code Example: Well-Structured ROS2 Node"}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of a ROS2 node following best practices:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\nfrom std_msgs.msg import String\nfrom sensor_msgs.msg import LaserScan\nimport threading\nfrom typing import Optional\nimport time\n\n\nclass BestPracticeNode(Node):\n    \"\"\"\n    Example ROS2 node demonstrating best practices.\n\n    This node follows ROS2 best practices including:\n    - Proper parameter declaration and validation\n    - Error handling and logging\n    - Efficient message handling\n    - Resource management\n    - Clear documentation\n    \"\"\"\n\n    def __init__(self):\n        super().__init__('best_practice_node')\n\n        # 1. Parameter declaration with validation\n        self.declare_parameters(\n            namespace='',\n            parameters=[\n                ('robot_name', 'default_robot', rclpy.ParameterDescriptor(\n                    description='Name of the robot')),\n                ('publish_rate', 10, rclpy.ParameterDescriptor(\n                    description='Rate at which to publish messages')),\n                ('sensor_timeout', 1.0, rclpy.ParameterDescriptor(\n                    description='Timeout for sensor data in seconds')),\n                ('debug_mode', False, rclpy.ParameterDescriptor(\n                    description='Enable debug output')),\n            ]\n        )\n\n        # 2. Get parameters with type safety\n        self.robot_name = self.get_parameter('robot_name').value\n        self.publish_rate = self.get_parameter('publish_rate').value\n        self.sensor_timeout = self.get_parameter('sensor_timeout').value\n        self.debug_mode = self.get_parameter('debug_mode').value\n\n        # 3. Validate parameters\n        if self.publish_rate <= 0:\n            self.get_logger().error('Invalid publish_rate, using default of 10')\n            self.publish_rate = 10\n\n        # 4. Setup QoS profiles for different use cases\n        # Reliable communication for critical data\n        reliable_qos = QoSProfile(\n            depth=10,\n            reliability=ReliabilityPolicy.RELIABLE,\n            durability=DurabilityPolicy.VOLATILE\n        )\n\n        # Best effort for high-frequency data\n        best_effort_qos = QoSProfile(\n            depth=5,\n            reliability=ReliabilityPolicy.BEST_EFFORT,\n            durability=DurabilityPolicy.VOLATILE\n        )\n\n        # 5. Create publishers and subscribers\n        self.status_publisher = self.create_publisher(\n            String, 'robot_status', reliable_qos)\n\n        self.sensor_subscriber = self.create_subscription(\n            LaserScan, 'laser_scan', self.sensor_callback, best_effort_qos)\n\n        # 6. Create timer with proper rate control\n        self.timer = self.create_timer(\n            1.0 / self.publish_rate, self.status_timer_callback)\n\n        # 7. Initialize state variables safely\n        self.last_sensor_data_time = self.get_clock().now()\n        self.sensor_data_lock = threading.Lock()\n        self.latest_scan_data = None\n\n        self.get_logger().info(\n            f'BestPracticeNode initialized for robot: {self.robot_name}')\n\n    def sensor_callback(self, msg: LaserScan):\n        \"\"\"\n        Callback for sensor data with proper error handling.\n\n        Args:\n            msg: LaserScan message from sensor\n        \"\"\"\n        try:\n            # Validate message data\n            if len(msg.ranges) == 0:\n                self.get_logger().warning('Received empty laser scan')\n                return\n\n            # Protect shared data with lock\n            with self.sensor_data_lock:\n                self.latest_scan_data = msg\n                self.last_sensor_data_time = self.get_clock().now()\n\n            if self.debug_mode:\n                self.get_logger().debug(f'Received scan with {len(msg.ranges)} ranges')\n\n        except Exception as e:\n            self.get_logger().error(f'Error in sensor_callback: {e}')\n\n    def status_timer_callback(self):\n        \"\"\"\n        Timer callback for publishing status messages.\n        \"\"\"\n        try:\n            # Check for sensor timeout\n            current_time = self.get_clock().now()\n            time_since_sensor = (current_time - self.last_sensor_data_time).nanoseconds / 1e9\n\n            if time_since_sensor > self.sensor_timeout:\n                self.get_logger().warn(f'Sensor data timeout: {time_since_sensor:.2f}s')\n\n            # Create and publish status message\n            status_msg = String()\n            status_msg.data = f'{self.robot_name}: operational, sensor_age: {time_since_sensor:.2f}s'\n            self.status_publisher.publish(status_msg)\n\n            if self.debug_mode:\n                self.get_logger().debug(f'Published status: {status_msg.data}')\n\n        except Exception as e:\n            self.get_logger().error(f'Error in status_timer_callback: {e}')\n\n    def destroy_node(self):\n        \"\"\"\n        Properly clean up resources when node is destroyed.\n        \"\"\"\n        self.get_logger().info('Cleaning up BestPracticeNode resources')\n        # Any custom cleanup code here\n        super().destroy_node()\n\n\ndef main(args=None):\n    \"\"\"\n    Main function with proper exception handling.\n    \"\"\"\n    rclpy.init(args=args)\n\n    try:\n        best_practice_node = BestPracticeNode()\n        rclpy.spin(best_practice_node)\n    except KeyboardInterrupt:\n        print('Interrupted by user')\n    except Exception as e:\n        print(f'Error during execution: {e}')\n    finally:\n        # Always clean up\n        if 'best_practice_node' in locals():\n            best_practice_node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"launch-file-best-practices",children:"Launch File Best Practices"}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of a well-structured launch file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, SetEnvironmentVariable, RegisterEventHandler\nfrom launch.conditions import IfCondition\nfrom launch.substitutions import LaunchConfiguration, PythonExpression\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch.event_handlers import OnProcessExit\nimport os\n\n\ndef generate_launch_description():\n    # Get package share directory\n    pkg_share = get_package_share_directory('best_practices_examples')\n\n    # Declare launch arguments with descriptions\n    debug_mode_arg = DeclareLaunchArgument(\n        'debug_mode',\n        default_value='false',\n        description='Enable debug output and tools'\n    )\n\n    use_sim_time_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation time'\n    )\n\n    # Get launch configurations\n    debug_mode = LaunchConfiguration('debug_mode')\n    use_sim_time = LaunchConfiguration('use_sim_time')\n\n    # Define nodes with proper configuration\n    best_practice_node = Node(\n        package='best_practices_examples',\n        executable='best_practice_node',\n        name='best_practice_node',\n        parameters=[\n            os.path.join(pkg_share, 'config', 'best_practice_params.yaml'),\n            {'use_sim_time': use_sim_time},\n            {'debug_mode': debug_mode}\n        ],\n        output='screen',\n        # Restart if the node dies\n        respawn=True,\n        respawn_delay=2.0,\n        # Additional environment variables if needed\n        additional_env={'RCUTILS_COLORIZED_OUTPUT': '1'}\n    )\n\n    # Conditional nodes (only run if debug mode is enabled)\n    debug_node = Node(\n        package='best_practices_examples',\n        executable='debug_node',\n        name='debug_node',\n        condition=IfCondition(debug_mode),\n        parameters=[{'use_sim_time': use_sim_time}]\n    )\n\n    return LaunchDescription([\n        # Launch arguments\n        debug_mode_arg,\n        use_sim_time_arg,\n\n        # Environment setup\n        SetEnvironmentVariable(name='RCUTILS_LOGGING_SEVERITY_THRESHOLD', value='INFO'),\n\n        # Nodes\n        best_practice_node,\n        debug_node,\n    ])\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing-best-practices",children:"Testing Best Practices"}),"\n",(0,t.jsx)(n.p,{children:"Here's an example of unit testing for a ROS2 node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import unittest\nimport rclpy\nfrom rclpy.executors import SingleThreadedExecutor\nfrom std_msgs.msg import String\nfrom best_practices_examples.best_practice_node import BestPracticeNode\n\n\nclass TestBestPracticeNode(unittest.TestCase):\n\n    @classmethod\n    def setUpClass(cls):\n        rclpy.init()\n\n    @classmethod\n    def tearDownClass(cls):\n        rclpy.shutdown()\n\n    def setUp(self):\n        self.node = BestPracticeNode()\n        self.executor = SingleThreadedExecutor()\n        self.executor.add_node(self.node)\n\n    def tearDown(self):\n        self.node.destroy_node()\n\n    def test_parameter_declaration(self):\n        \"\"\"Test that parameters are properly declared.\"\"\"\n        # Check that parameters exist\n        self.assertTrue(self.node.has_parameter('robot_name'))\n        self.assertTrue(self.node.has_parameter('publish_rate'))\n        self.assertTrue(self.node.has_parameter('sensor_timeout'))\n        self.assertTrue(self.node.has_parameter('debug_mode'))\n\n    def test_parameter_values(self):\n        \"\"\"Test that parameters have correct default values.\"\"\"\n        robot_name_param = self.node.get_parameter('robot_name').value\n        self.assertEqual(robot_name_param, 'default_robot')\n\n        publish_rate_param = self.node.get_parameter('publish_rate').value\n        self.assertEqual(publish_rate_param, 10)\n\n    def test_status_publishing(self):\n        \"\"\"Test that status messages are published.\"\"\"\n        # Create a subscription to catch published messages\n        received_msgs = []\n\n        def msg_callback(msg):\n            received_msgs.append(msg)\n\n        sub = self.node.create_subscription(\n            String, 'robot_status', msg_callback, 10)\n\n        # Trigger the timer callback manually\n        self.node.status_timer_callback()\n\n        # Process any pending callbacks\n        self.executor.spin_once(timeout_sec=0.1)\n\n        # Check that a message was published\n        self.assertEqual(len(received_msgs), 1)\n        self.assertIn('default_robot', received_msgs[0].data)\n\n\nif __name__ == '__main__':\n    unittest.main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-by-step-practical-tutorial",children:"Step-by-Step Practical Tutorial"}),"\n",(0,t.jsx)(n.h3,{id:"implementing-best-practices-in-a-complete-example",children:"Implementing Best Practices in a Complete Example"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a new ROS2 package for best practices examples"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python best_practices_examples --dependencies rclpy std_msgs sensor_msgs\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Navigate to the package directory"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd best_practices_examples\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create the main module directory"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir best_practices_examples\ntouch best_practices_examples/__init__.py\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create the best practice node"})," (",(0,t.jsx)(n.code,{children:"best_practices_examples/best_practice_node.py"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Use the well-structured node code example above\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create launch and config directories"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir launch config\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a parameter configuration file"})," (",(0,t.jsx)(n.code,{children:"config/best_practice_params.yaml"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'best_practice_node:\n  ros__parameters:\n    robot_name: "best_practice_robot"\n    publish_rate: 5\n    sensor_timeout: 2.0\n    debug_mode: false\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create the launch file"})," (",(0,t.jsx)(n.code,{children:"launch/best_practices_launch.py"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Use the well-structured launch file example above\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a test directory"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir test\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a test file"})," (",(0,t.jsx)(n.code,{children:"test/test_best_practice_node.py"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Use the testing example above\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Update setup.py"})," with proper configuration:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'best_practices_examples'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n        (os.path.join('share', package_name, 'config'), glob('config/*.yaml')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='User',\n    maintainer_email='user@example.com',\n    description='Package demonstrating ROS2 best practices',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'best_practice_node = best_practices_examples.best_practice_node:main',\n        ],\n    },\n)\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build the package"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select best_practices_examples\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source the workspace"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Run the best practices node"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run best_practices_examples best_practice_node\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Run with launch file"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 launch best_practices_examples best_practices_launch.py debug_mode:=true\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"This chapter covered essential ROS2 best practices that should be followed when developing robotic applications. These practices include proper node design, error handling, parameter management, testing, and documentation."}),"\n",(0,t.jsx)(n.p,{children:"Following these best practices results in more maintainable, reliable, and efficient robotic systems. They help ensure that your ROS2 applications can be deployed in production environments and maintained over time."}),"\n",(0,t.jsx)(n.h2,{id:"mini-quiz",children:"Mini-Quiz"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"What is the primary principle behind single responsibility for ROS2 nodes?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A) A node should handle all robot functions"}),"\n",(0,t.jsx)(n.li,{children:"B) Each node should have one clear purpose"}),"\n",(0,t.jsx)(n.li,{children:"C) A node should only publish messages"}),"\n",(0,t.jsx)(n.li,{children:"D) A node should only subscribe to messages"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"What does QoS stand for in ROS2?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A) Quality of Service"}),"\n",(0,t.jsx)(n.li,{children:"B) Quick Operating System"}),"\n",(0,t.jsx)(n.li,{children:"C) Quality Operating System"}),"\n",(0,t.jsx)(n.li,{children:"D) Quantum Operating Service"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Which testing level is most important for ROS2 nodes?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A) Unit testing only"}),"\n",(0,t.jsx)(n.li,{children:"B) Integration testing only"}),"\n",(0,t.jsx)(n.li,{children:"C) Both unit and integration testing"}),"\n",(0,t.jsx)(n.li,{children:"D) No testing needed"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["What is the purpose of the ",(0,t.jsx)(n.code,{children:"declare_parameters"})," method?"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A) To publish parameters to topics"}),"\n",(0,t.jsx)(n.li,{children:"B) To declare multiple parameters at once with descriptions"}),"\n",(0,t.jsx)(n.li,{children:"C) To subscribe to parameter changes"}),"\n",(0,t.jsx)(n.li,{children:"D) To delete parameters"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["What should you do in the ",(0,t.jsx)(n.code,{children:"destroy_node"})," method?"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A) Nothing special"}),"\n",(0,t.jsx)(n.li,{children:"B) Properly clean up resources when the node is destroyed"}),"\n",(0,t.jsx)(n.li,{children:"C) Restart the node"}),"\n",(0,t.jsx)(n.li,{children:"D) Publish final messages"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Answers"}),": 1-B, 2-A, 3-C, 4-B, 5-B"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}},8793:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ch6-ad-401f6484efdd66c13d9d640dc29d7743.png"},9729:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ch6-flow-47ce08bc7fc83a8a5d51283284895a8c.svg"}}]);